<!doctype html>

<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>Rolling Average Growth Factor</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
    <canvas id="chart"></canvas>
  </body>

  <script src="util.js"></script>

  <script>
    chart.options.scales.yAxes[0].scaleLabel.labelString = 'Rolling average growth factor';

    var days = 22;

    start(data => {
      let result = [];
      for (const [i, e] of data.entries()) {
        if (e.confirmed < 100 || i < days || !data[i - days].confirmed) continue;
        const rate = (data[i].confirmed / data[i - days].confirmed) ** (1 / days);
        result.push(rate);
      }
      return result;
    });
  </script>

</html>
